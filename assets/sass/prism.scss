$white:     #ffffff;
$light:     #dddddd;
$grey:      #808080;
$dark:      #333333;
$black:     #000000;

$green:     #87fab3;
$highlight: #87CEFA;

$border: 2px solid $black;
$header-height: 80px;
$sub-header-height: 65px;

$metapanel-width: 300px;

body > *:not(#prism) { display: none; }

#prism {

	display: block; position: relative;
	width: 100%; height: 100vh;

	overflow: hidden;

	* {
		box-sizing: border-box;
	}

	&.rainbow * {
		background: $dark !important;
	}

	.prism-resize-bar {
		display: block; position: absolute;
		width: 4px; height: 100%;
		right: -3px; top: 0; bottom: 0;
		background: transparent;

		cursor: col-resize;
		z-index: 100;

		&:hover {
			background-color: $highlight;
			opacity: .75;
		}
	}

	#prism-header {
		display: block; position: relative;
		width: 100%; height: $header-height;

		border-bottom: $border;

		a {

			display: inline-block; float: left;
			padding: 5px 10px 0;
			cursor: pointer;
			text-decoration: none;

			h1 {
				margin: 0;
				font: {
					family: 'Kinescope';
					size: 60px;
				}
			}

		}

		#prism-rainbow-bar {
			display: inline-block; float: left;
			padding: 5px 10px; margin: 12px 20px 0;
			font: {
				size: 32px;
			}
			border: 0;
			color: $light;

			&:focus {
				color: $dark;
				background: $white !important;
			}
		}

		span.description {
			display: block; position: relative; float: right;
			max-width: 420px;
			padding: 16px 20px;
			
			color: $grey;
			
			font: {
				family: 'Gibson', sans-serif;
				size: 14px;
				style: italic;
			}

			text: {
				align: right;
			}
		}


		#prism-user-account {
			float: right;
			margin: 12px 10px 0 0;

			cursor: pointer;

			i.fa-user {
				border: {
					radius: 50%;
					color: $grey;
				}

				color: $grey;

				&:hover {
					color: $highlight;
					border-color: $highlight;
				}
			}

			img {
				margin-top: -2px;
				border-radius: 50%;
			}

		}

	}

	#prism-tree {

		display: block; position: relative;
		width: 100%; height: calc( 100vh - #{$header-height} );

		#prism-trunk {
			display: block; position: relative; float: left;
			height: 100%;

			border-right: $border;

			#prism-search {

				display: block; position: relative;
				width: 100%; height: $sub-header-height;
				padding: 10px;

				border-bottom: $border;

				font-size: 24px;

				&.active {
					background: $highlight;
					color: $black;
					border-color: $black;
				}

				input {
					width: 100%;
					padding: 2px 10px;

					border: $border;
					border-color: $grey;
					background: $white;

					&:focus {
						background: $white !important;
						outline: none !important;
					}
				}
			}

			menu {

				padding: 0; margin: 0;

				ul {

					padding: 0; margin: 0;

					li {
						list-style: none;


						&:first-of-type a {
							border-top: none;
						}

						a { 
							display: block;
							padding: 20px;

							color: $grey;
							font-size: 24px;
							font-family: 'Source Code Pro', sans-serif;
							text-decoration: none;

							cursor: pointer;

							border-top: $border;
							border-bottom: $border;
							border-color: transparent;

							&:hover {
								background: $light;
							}

							&.active {
								font-weight: bold;
								background: $highlight;
								color: $black;
								border-color: $black;
							}

						}
					}
				}
			}
		}

		#prism-branch {
			display: block; position: relative; float: left;
			height: 100%;

			border-right: $border;

			header#prism-branch-header {

				height: $sub-header-height;
				padding: 10px;
				border-bottom: $border;

				h2 {
					padding: 5px; margin: 0;
					text-transform: capitalize;
				}

				div#prism-branch-visual-controls {

					display: block; position: absolute;
					right: 0; top: 0;

					i.fa {
						margin: 10px 10px 0 0;

						color: $light;
						cursor: pointer;

						border-color: $light;

						&:hover {
							color: $highlight;
							border-color: $highlight;
						}

						&.active {
							color: $grey;
							border-color: $grey;
							background-color: $light;
						}
					}

					i#prism-add-leaf {

						margin-right: 25px;

						&:hover {
							color: $grey;
							border-color: $grey;
							background: $green;
						}
					}
				}

			}

			$grid-size: 25%;
			$half-size: 50%;
			$full-size: 100%;
			$list-size: 100%;

			&.grid ul#prism-leaves .prism-leaf {
				width: calc( #{$grid-size} - 10px );
				padding-bottom: calc( #{$grid-size} - 10px );
			}

			&.half ul#prism-leaves .prism-leaf {
				width: calc( #{$half-size} - 10px );
				padding-bottom: calc( #{$half-size} - 10px );
			}

			&.full ul#prism-leaves .prism-leaf {
				width: calc( #{$full-size} - 10px );
				padding-bottom: calc( #{$full-size} - 10px );
			}

			&.list ul#prism-leaves .prism-leaf,
			&.list ul#prism-leaves .prism-leaf.media:hover {
				width: calc( 100% - 10px ) !important;
				padding-bottom: 100px !important;
				background: {
					position: left center !important;
					size: 100px !important;
					repeat: no-repeat;
				}
				opacity: 1 !important;

				&:hover  { background-color: $light !important; }
				&.active { background-color: $highlight !important; }

				&.media a { padding-left: 110px; }

				a {
					background-color: $white;

					text-shadow: none;
					font-size: 16px;
					font-weight: bold;
					line-height: 20px;

					background: none;

					cursor: pointer;

					color: $grey;
				}
			}

			ul#prism-leaves {

				height: calc( 100% - #{$sub-header-height} );
				padding: 5px; margin: 0 1px 0 0;

				overflow-y: scroll;

				&::-webkit-scrollbar-track {
					-webkit-box-shadow: none;
					background-color: transparent;
				}

				.prism-leaf {
					display: block; position: relative; float: left;
					height: auto; margin: 5px;

					&.media {
						opacity: .4;
						background-position: center center;
						background-size: 100%;

						a {

							color: $black;
							text-shadow: 0 0 2px $white;

							&:hover {
								color: $white;
								background-color: transparent;
								border-color: $black;
								text-shadow: 0 0 2px $black;
							}

						}

						&:hover {
							opacity: .8;
							background-size: 105% !important;
							box-shadow: 0 0 5px $dark;

							transition: background-size .1s;
						}

						&.active {
							opacity: 1;
							box-shadow: 0 0 10px $highlight;

							a {
								color: $white;
								background: transparent;
								text-shadow: 0 0 5px $black;
							}
						}

					}

					a {
						display: block; position: absolute;
						left: 0; right: 0;
						top: 0; bottom: 0;
						padding: 10px;

						font-size: 16px;
						font-weight: bold;
						line-height: 20px;

						background: none;

						cursor: pointer;

						color: $grey;

						text-decoration: none;

						border: $border;
						border-color: $grey;

						&:hover {
							color: $black;
							background-color: $light;
							border-color: $black;
						}

					}

					&.active {

						box-shadow: 0 0 10px $highlight;

						a {
							color: $black;
							background: $highlight;
							border-color: $black;
						}
					}

				}

			}
		}

		#prism-leaf {
			display: block; position: relative; float: left;
			height: 100%;

			border-right: $border;

			header#prism-leaf-header {

				height: $sub-header-height;
				padding: 10px;
				border-bottom: $border;

				h2 {
					display: inline; float: left;
					width: calc( 100% - #{$metapanel-width} );
					padding: 5px; margin: 0;

					div {
						width: 100%; min-height: 30px;
						margin-top: -2px;
						border: $border;
						border-color: transparent;
						white-space: nowrap;
					}

					input {
						width: calc( 100% + 10px );
						padding: 0 5px; margin: -5px 0 0 -5px;
						border: $border;
						border-color: $light;
					}
				}

				i.fa {
					display: block; position: absolute;
					right: 0; top: 0;
					margin: 10px;
					cursor: pointer;
					color: $light;

					&:hover {
						color: $highlight;
					}

					&.active {
						color: $black;
					}

				}
			}

			#prism-leaf-content {

				display: block; position: relative; float: left;
				width: calc( 100% - 20px ); height: calc( 100% - 20px - #{$sub-header-height} );
				padding: 10px; margin: 10px;
				border: $border;
				border-color: $light;

			}

		}

		#prism-meta {

			display: block; position: relative; float: left;
			height: 100%;
			background-color: $light;

			header#prism-meta-header {

				height: $sub-header-height;
				padding: 10px;
				border-bottom: $border;

				h3 {
					margin: 8px 0 0 0;
					color: $black;
					text: {
						transform: capitalize;
					}
					font-weight: bold;
				}

				i.fa {
					display: block; position: absolute;
					right: 0; top: 0;
					margin: 18px 15px;
					cursor: pointer;
					color: $grey;
					border: none;

					&:hover {
						color: $highlight;
					}

					&.fa-lock {
						color: $black;
					}
				}
			}

			ul#prism-meta-info {

				padding: 10px; margin: 0;

				li {
					display: block; position: relative;
					width: 100%;
					margin-bottom: 10px;

					list-style: none;

					h4 {
						display: block;
						padding: 3px 5px; margin: 0;
						background: $grey;
						color: $white;
					}

					span {
						display: block;
						padding: 5px;
						border: 1px solid $grey;
						background: $white;

						code {
							display: block;
							padding: 4px; margin: 0;
							cursor: pointer;
						}

						input {
							width: 100%;
						}

					}
				}

			}
		}

	}

	#prism-footer {

	}

}